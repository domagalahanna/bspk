<template>
  <footer class="footer" data-scroll>
    <div class="footer__content">
      <div class="footer__logo">
        <img :src="$withBase('images/logo.svg')" alt="BSPK">
      </div>
      <nav class="footer__nav">
        <div class="footer__contact">
          <h2 class="footer__title">
            Contact
          </h2>
          <address>
            Menlo Park, California, USA<br>
            +1 415-915-2775<br>
            contact@bspk.com<br>
          </address>
        </div>
        <div class="footer__socials">
          <h2 class="footer__title">
            Find us
          </h2>
          <ul>
            <li>
              <a href="#" target="_blank">Twitter</a>
            </li>
            <li>
              <a href="#" target="_blank">LinkedIn</a>
            </li>
            <li>
              <a href="#" target="_blank">Facebook</a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    <div class="copyrights">
      <nav>
        <a href="#">Privacy</a>
        <span class="divider">—</span>
        <a href="#">Terms of use</a>
      </nav>
      <div class="copyrights__copy">
        ©2021 BSPK Inc. All rights reserved.
      </div>
    </div>
  </footer>
</template>

<script>
import 'locomotive-scroll/dist/locomotive-scroll.css';

export default {
  data: () => ({
    locomotiveScroll: null,
    scrollInstance: null
  }),
  mounted() {
    if(!this.locomotiveScroll) {
      import('locomotive-scroll').then(module => {
        this.locomotiveScroll = module.default;
        this.initLocoScroll();
        this.$nextTick(() => this.scrollInstance.update());
      });
    } else {
      this.initLocoScroll();
      this.$nextTick(() => this.scrollInstance.update());
    }
  },
  methods: {
    initLocoScroll() {
      this.scrollInstance = new this.locomotiveScroll({
        el: document.querySelector('[data-scroll-container]'),
        smooth: true,
        smoothMobile: true,
        getDirection: true,
        repeat: true,
        reloadOnContextChange: true
      });

      this.scrollInstance.on('scroll', scrollData => {
        this.$root.$emit('body-scroll', scrollData)
      });

      this.scrollInstance.on('call', action => {
        if (action === "playVideo") {
          document.getElementById('videoElement').play()
        }
      })
    }
  }
}
</script>

<style lang="stylus" scoped>
.footer
  padding 50px 37px   
  position relative
  font-size 18px

  &__logo
    text-align center
    img 
      width 200px

  &__title
    margin-bottom 5px
    font-weight 600

  &__nav
    display flex
    justify-content space-between
    line-height 1.8
    margin-top 40px

    .footer__contact
      width 50%

    .footer__socials
      width 30%

  @media (min-width $MQlg)
    background $lightBeige
    border-top 1px solid $darkBeige
    padding 110px 100px 60px
    font-size 1rem
    overflow-x hidden

    &::before
      content ''
      position absolute
      width 549px
      height 555px
      border-radius 50%
      border 1px solid $darkBeige
      top -140px
      right 0
      transform translate(100px, 0)
      z-index -1

    &__content
      display flex

    &__logo
      text-align left
      width 50%
      img 
        width 400px
        max-width 80%

    &__nav
      line-height 1.6
      margin-top 0
      width 50%
      justify-content start

      .footer__contact
        width 50%
        padding-right 20px

.copyrights
  text-align center
  font-size 18px
  margin-top 50px

  &__copy
    margin-top 10px
    font-size 16px
    opacity 0.8

  @media (min-width $MQlg)
    text-align left
    margin-top 140px
    display flex
    justify-content space-between
    font-weight 500
    font-size 13px

    &__copy
      margin-top 0
      opacity 1
      font-size 13px

    a
      margin-right 20px
      &:last-child
        margin-right 0

.divider
  padding-left 20px
  padding-right 20px
  font-weight 500

  @media (min-width $MQlg)
    display none
</style>